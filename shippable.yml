language: scala

scala:
   - 2.11.4

before_script:
 - export PATH=$PATH:$SHIPPABLE_REPO_DIR
 - sudo apt-get install apt-transport-https
 - sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9
 - sudo sh -c "echo deb https://get.docker.io/ubuntu docker main > /etc/apt/sources.list.d/docker.list"
 - sudo apt-get update
 - sudo apt-get install lxc-docker -y
 - docker login --username="$DOCKER_USERNAME" --password="$DOCKER_PASSWORD" --email="$DOCKER_EMAIL"

build_image: shippableimages/ubuntu1404_scala:0.0.1

script:
 - export SBT_OPTS="-XX:+CMSClassUnloadingEnabled -XX:PermSize=256M -XX:MaxPermSize=512M"
 - sbt clean compile dockerBuildAndPush

notifications:
 email:
   recipients:
   - krisztian.lachata@gmail.com

env:
  global:
  - secure: jj0P7IasMiW3LnbxrYOaO8TuuIHF2fn0hm/DuX+0wCVlJKQ0LHREfLCiUDL9DXKVkwTXhifo8LIJunBcmYzpmJzQvT6tRIFWBr2ubAMtTUu3YlJfMO15xVznWXezwp6ITLox201c4EVTYRIzyVPawGL4edRhoVWwp/kcknJionslOUzPAyLYVkO5LN8cO/CigBcxHZKFYx6LF40bxP8PPnHJYTy51Vk2GoA1rLipMBwcZc8X8w3QN/1UYQv21cVKIOlksCM7Q4nLjm3OEtc0l50Dpu+g87AsbZHLYrYz4nsr783tMYymsyvhqlF+oM3si2uTbKoJAs50DiEguRcAQQ==